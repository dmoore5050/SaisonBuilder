#!/usr/bin/env ruby

require_relative 'bootstrap_ar'
require_relative 'views/style'
require_relative 'views/menu'
require_relative 'views/techniques'
require_relative 'views/question_set'

database = ENV['FP_ENV'] || 'development'
connect_to database

command = nil
command = ARGV[0].downcase unless ARGV[0].nil?

params = { command: command, recipe: { name: ARGV[1] } }
recipe_controller = RecipeController.new(params)
ingredient_controller = IngredientController.new

case command
when nil
  Menu.render_menu
when 'style'
  Style.render_definition
when 'techniques'
  Techniques.render_list
when 'ingredients'
  ingredient_controller.list_ingredients
when 'build'
  QuestionSet.menu
when 'add'
  recipe_controller.create
when 'list'
  recipe_controller.list_recipes
when 'delete'
  recipe_controller.delete
end
